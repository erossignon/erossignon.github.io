<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Chrome | Gadz-Geek Blog]]></title>
  <link href="http://erossignon.github.io/blog/categories/chrome/atom.xml" rel="self"/>
  <link href="http://erossignon.github.io/"/>
  <updated>2014-09-06T10:51:49+02:00</updated>
  <id>http://erossignon.github.io/</id>
  <author>
    <name><![CDATA[Etienne Rossignon]]></name>
    <email><![CDATA[etienne.rossignon@gadz.org]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Benchmarking the Performance of Nodejs]]></title>
    <link href="http://erossignon.github.io/blog/2014/08/22/benchmarking-the-performance-of-nodejs/"/>
    <updated>2014-08-22T22:07:00+02:00</updated>
    <id>http://erossignon.github.io/blog/2014/08/22/benchmarking-the-performance-of-nodejs</id>
    <content type="html"><![CDATA[<p>During the course of developing <a href="http://node-opcua.github.io/">node-opcua</a>, a javascript framework for OPCUA powered by
<a href="http://nodejs.org">nodejs</a>, I came across the need to measure the performance of nodejs on various hardware including
ARM based nano-computers such as RasberryPi and BeagleBoneBlack.</p>

<!-- more -->

<h3>Understanding the performance of the V8 engine used by nodejs.</h3>

<p>Nodejs is using  Google V8 javascript engine which runs inside the Chrome web browser too.</p>

<p>V8 code optimisation can lead to <a href="http://wingolog.org/archives/2011/06/10/v8-is-faster-than-gcc">astonishing good results</a>
compared with C/C++ program, at least on a x86/x64 processor.</p>

<p>But &#8230;</p>

<ul>
<li>Does V8 inside nodejs perform as well as in Chrome ? </li>
<li>Is V8 performing well also on ARM CPU ?</li>
<li>How does nodejs running on a Raspberry compare  with nodejs running on an BeagleBoneBlack ? </li>
</ul>

<p>Here comes <strong><a href="https://code.google.com/p/octane-benchmark/">Octane 2</a></strong>, a <a href="http://thenextweb.com/google/2013/11/06/google-releases-version-2-0-javascript-benchmark-tool-octane-focus-reducing-latency">benchmark to score the performance of a javascript engine running inside a browser</a> designed by Google.</p>

<p>You can run the benchmark inside your browser by  following this <a href="http://octane-benchmark.googlecode.com/svn/latest/index.html">link</a> and pressing the START button.</p>

<p>Here are the results with Chrome and Firefox on my desktop:</p>

<table><thead>
<tr>
<th>Computer</th>
<th>environment</th>
<th style="text-align: right">Score</th>
<th>Javascript Engine</th>
</tr>
</thead><tbody>
<tr>
<td>Core I7 desktop</td>
<td>Chrome (36.0.1985.143)</td>
<td style="text-align: right">26008</td>
<td>V8 v3.26(*)</td>
</tr>
<tr>
<td>Core I7 desktop</td>
<td>Firefox 31</td>
<td style="text-align: right">15800</td>
<td>SpiderMonkey 31</td>
</tr>
<tr>
<td>VM Ubuntu 14.04(*)</td>
<td>Chromium  (36.0.1985.125)</td>
<td style="text-align: right">8178</td>
<td>V8 3.26</td>
</tr>
<tr>
<td>VM Ubuntu 14.04(*)</td>
<td>Firefox 31</td>
<td style="text-align: right">5041</td>
<td>SpiderMonkey 31</td>
</tr>
</tbody></table>

<p>(*) Ubuntu 14.04 running inside a VirtualBox machine on my Core I7 desktop.</p>

<p>However, I needed the same benchmark but running on nodejs , without a GUI.
Fortunately,  octane benches are pure javascript algorithms and can be easily ported to node.
Daishi Kato has published <a href="https://github.com/dai-shi/benchmark-octane">benchmark-octane</a> a NPM module on github that serves as a very good starting point.</p>

<p>With a few tweaks I created a <a href="https://github.com/erossignon/benchmark-octane">forked version of benchmark-octane</a> that suites my need.</p>

<p>This version produces the same output as the browser version making results more comparable.</p>

<p>This is the result of running <strong>benchmark-octane</strong> on various version of node:</p>

<h3>Running Octane benchmark for nodejs:</h3>

<table><thead>
<tr>
<th style="text-align: left">Computer</th>
<th style="text-align: left">environment</th>
<th style="text-align: right">Score</th>
<th style="text-align: right">time</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">Core I7 desktop</td>
<td style="text-align: left">nodejs 0.10.24</td>
<td style="text-align: right">15800</td>
<td style="text-align: right">50s</td>
</tr>
<tr>
<td style="text-align: left">Raspberry</td>
<td style="text-align: left">nodejs 0.10.24</td>
<td style="text-align: right">138</td>
<td style="text-align: right">2351 s</td>
</tr>
<tr>
<td style="text-align: left">VM Ubuntu 14.04</td>
<td style="text-align: left">nodejs 0.08.21</td>
<td style="text-align: right">5600</td>
<td style="text-align: right">74s</td>
</tr>
<tr>
<td style="text-align: left">VM Ubuntu 14.04</td>
<td style="text-align: left">nodejs 0.10.10</td>
<td style="text-align: right">6550</td>
<td style="text-align: right">62s</td>
</tr>
<tr>
<td style="text-align: left">VM Ubuntu 14.04</td>
<td style="text-align: left">nodejs 0.10.24</td>
<td style="text-align: right">6472</td>
<td style="text-align: right">62s</td>
</tr>
<tr>
<td style="text-align: left">VM Ubuntu 14.04</td>
<td style="text-align: left">nodejs 0.10.31</td>
<td style="text-align: right">(crashed in Mandreel)</td>
<td style="text-align: right"></td>
</tr>
<tr>
<td style="text-align: left">VM Ubuntu 14.04</td>
<td style="text-align: left">nodejs 0.11.13</td>
<td style="text-align: right">8050</td>
<td style="text-align: right">50s</td>
</tr>
</tbody></table>

<h2>running NodeJS Benchmark</h2>

<p>Follow this instruction to run <a href="https://github.com/erossignon/benchmark-octane">Benchmark-octane</a> </p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>git clone https://github.com/erossignon/benchmark-octane
<span class="nv">$ </span><span class="nb">cd </span>benchmark-octane
<span class="nv">$ </span>npm install
<span class="nv">$ </span>node run.js
</code></pre></div>]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[What Version of V8 My Chromium Browser Is Using ?]]></title>
    <link href="http://erossignon.github.io/blog/2014/08/22/how-to-find-the-version-of-the-v8-my-chromium-browser-is-using/"/>
    <updated>2014-08-22T21:58:00+02:00</updated>
    <id>http://erossignon.github.io/blog/2014/08/22/how-to-find-the-version-of-the-v8-my-chromium-browser-is-using</id>
    <content type="html"><![CDATA[<p>Here are two methods that can be use to find the version of the V8 engine that a particular version of node is using.</p>

<!-- more -->

<h3>getting the version of your running Chrome</h3>

<p>if you want to find the V8 engine of the version of chrome you are currently running</p>

<ol>
<li>visit the chrome://version/ page</li>
<li>get the version of the &quot;javascript&quot; engine.</li>
</ol>

<h3>if don&#39;t have a running instance of Chrome</h3>

<p>If don&#39;t have a instance of Chrome running with the version you want to investigate:</p>

<ol>
<li>check the version of Chrome using the &quot;About&quot; command.
For instance, let say it&#39;s &#39;36.0.1985.143&#39; .</li>
<li><p>navigate to <code>http://src.chromium.org/viewvc/chrome/releases/[VERSION]/DEPS</code> 
( replace [VERSION] with the actual string you found at step 1).
In our example, this will be<br>
<a href="http://src.chromium.org/viewvc/chrome/releases/36.0.1985.143/DEPS">http://src.chromium.org/viewvc/chrome/releases/36.0.1985.143/DEPS</a>.
This file,  maintained by the Chrome development team contains the description of all the dependencies and components used by Chrome, their location and their version number.</p></li>
<li><p>Inside this file, search for the line containing <code>Var(&quot;v8&quot;)</code>.</p></li>
</ol>

<p>It will look like:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">Var(&quot;v8&quot;) + &#39;/branches/3.26@22818&#39;,
</code></pre></div>
<ol>
<li>That&#39;s it ! the corresponding V8 engine version is <strong>3.26</strong></li>
</ol>

<p>Here is V8 version for the various Chrome I am using :</p>

<table><thead>
<tr>
<th>Chromium Version</th>
<th>V8 version</th>
</tr>
</thead><tbody>
<tr>
<td>36.0.1985.143 Windows</td>
<td>v3.26@22818</td>
</tr>
<tr>
<td>36.0.1985.125 Ubuntu 14.04 (283153)</td>
<td>v3.26@21981</td>
</tr>
<tr>
<td>36.0.1985.57  IPhone</td>
<td>v3.26@21367</td>
</tr>
</tbody></table>

<p>This is explained in greater details in <a href="http://ariya.ofilabs.com/2012/02/find-v8-version-of-certain-chrome-release.html">this post</a></p>
]]></content>
  </entry>
  
</feed>
